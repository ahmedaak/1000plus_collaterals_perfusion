getwd()
snr_data
snr_data <- read.table("/AG/AG-Vaskulaere-Demenz/VCI/Ahmed/19F_VCI_Study/19F_VCI_InVivo/SNR_ANALYSIS/SNR_results.csv",header = T, sep = ";")
snr_data <- read.table("/AG/AG-Vaskulaere-Demenz/VCI/Ahmed/19F_VCI_Study/19F_VCI_InVivo/SNR_ANALYSIS/SNR_results.csv",header = T, sep = ";")
rm(list=ls()) # clear variables
##### SET FONT SIZE FOR CEX #####
fontsize <- 1.5
# plot SNR & QC results
snr_data <- read.table("/AG/AG-Vaskulaere-Demenz/VCI/Ahmed/19F_VCI_Study/19F_VCI_InVivo/SNR_ANALYSIS/SNR_results.csv",header = T, sep = ";")
# plot mean SNR
matplot(snr_data[c(1:4),], type = "b", lty = c(1), pch = c(19,15,17), col = c("black", "red", "blue", "green4"), xaxt = "n", ylab = "SNR (a.u.)", xlab = "Timepoints", cex.axis=fontsize,cex.lab=fontsize);
axis(1,at = c(1:4), labels = c("-1W","24h","1W","4W"), cex.axis=fontsize,cex.lab=fontsize)
# plot number of voxels
matplot(snr_data[c(5:8),], type = "b", lty = c(1), pch = c(19,15,17), col = c("black", "red", "blue", "green4"), xaxt = "n", ylab = "Number of voxels", xlab = "Timepoints", cex.axis=fontsize,cex.lab=fontsize)
axis(1,at = c(1:4), labels = c("-1W","24h","1W","4W"), cex.axis=fontsize,cex.lab=fontsize)
# plot 19F signal
signal_data <- read.table("/AG/AG-Vaskulaere-Demenz/VCI/Ahmed/19F_VCI_Study/19F_VCI_InVivo/SNR_ANALYSIS/signal_quantification.csv",header = T,sep = ";")
matplot(signal_data, type = "b", lty = c(1), pch = c(19,15,17), col = c("black", "red", "blue", "green4"), xaxt = "n", ylab = "Signal", xlab = "Timepoints", cex.axis=fontsize,cex.lab=fontsize)
axis(1,at = c(1:4), labels = c("-1W","24h","1W","4W"), cex.axis=fontsize,cex.lab=fontsize)
rm(list=ls()) # clear variables
##### SET FONT SIZE FOR CEX #####
fontsize <- 1.5
# plot SNR & QC results
snr_data <- read.table("/AG/AG-Vaskulaere-Demenz/VCI/Ahmed/19F_VCI_Study/19F_VCI_InVivo/SNR_ANALYSIS/SNR_results.csv",header = T, sep = ";")
# plot mean SNR
matplot(snr_data[c(1:4),], type = "b", lty = c(1), pch = c(19,15,17), col = c("black", "red", "blue", "green4"), xaxt = "n", ylab = "SNR (a.u.)", xlab = "Timepoints", cex.axis=fontsize,cex.lab=fontsize);
axis(1,at = c(1:4), labels = c("-1W","24h","1W","4W"), cex.axis=fontsize,cex.lab=fontsize)
# plot number of voxels
matplot(snr_data[c(5:8),], type = "b", lty = c(1), pch = c(19,15,17), col = c("black", "red", "blue", "green4"), xaxt = "n", ylab = "Number of voxels", xlab = "Timepoints", cex.axis=fontsize,cex.lab=fontsize)
axis(1,at = c(1:4), labels = c("-1W","24h","1W","4W"), cex.axis=fontsize,cex.lab=fontsize)
# plot 19F signal
signal_data <- read.table("/AG/AG-Vaskulaere-Demenz/VCI/Ahmed/19F_VCI_Study/19F_VCI_InVivo/SNR_ANALYSIS/signal_quantification.csv",header = T,sep = ";")
matplot(signal_data, type = "b", lty = c(1), pch = c(19,15,17), col = c("black", "red", "blue", "green4"), xaxt = "n", ylab = "Signal", xlab = "Timepoints", cex.axis=fontsize,cex.lab=fontsize)
axis(1,at = c(1:4), labels = c("-1W","24h","1W","4W"), cex.axis=fontsize,cex.lab=fontsize)
getwd()
getwd()
setwd("S:/AG/AG-CSB_NeuroRad/khalila/KV_collaterals_1000plus/")
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";")
str(auto_pts)
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";")
all_pts <- merge(auto_pts, manual_pts, by = "ID")
View(all_pts)
?merge
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";")
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";")
139+47
allpts <- read.table("Carmela_Project.csv", header = T, sep=",")
all_pts <- merge(auto_pts, manual_pts, by = "ID")
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";")
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";")
all_pts <- merge(auto_pts, manual_pts, by = "ID")
View(auto_pts)
View(manual_pts)
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";")
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";")
all_pts <- merge(auto_pts, manual_pts, by = "ID")
all_pts <- rbind(auto_pts, manual_pts)
View(all_pts)
all_pts_sorted <- all_pts[order(ID),]
all_pts_sorted <- all_pts[order(all_pts$ID),]
View(all_pts_sorted)
duplicated(all_pts)
duplicated(all_pts$ID)
mega_allpts <- merge(all_pts, allpts)
mega_allpts <- merge(all_pts, allpts, by="ID")
View(allpts)
colnames(allpts)[1] <- "ID"
mega_allpts <- merge(all_pts, allpts, by="ID")
View(mega_allpts)
View(allpts)
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";")
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";")
all_pts <- rbind(auto_pts, manual_pts)
mega_allpts <- merge(all_pts, allpts, by="ID")
View(mega_allpts)
auto_pts <- auto_pts[,c(3,5,7,9,11,13)]
manual_pts <- manual_pts[,c(3,5,7,9,11,13)]
auto_pts[,-1] <- auto_pts[,-1]*0.001
# load volumetric data
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";") # patients automatically delineated
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";") # patients manually delineated
auto_pts <- auto_pts[,c(1,3,5,7,9,11,13)]
manual_pts <- manual_pts[,c(1,3,5,7,9,11,13)]
auto_pts[,-1] <- auto_pts[,-1]*0.001
# load volumetric data
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";") # patients automatically delineated
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";") # patients manually delineated
# remove # of voxels, keep only volumes (in mm3)
auto_pts <- auto_pts[,c(1,3,5,7,9,11,13)]
manual_pts <- manual_pts[,c(1,3,5,7,9,11,13)]
# convert volumes to mL (cm3)
auto_pts[,-1] <- auto_pts[,-1]*0.001
manual_pts[,-1] <- manual_pts[,-1]*0.001
vols_all_pts <- rbind(auto_pts, manual_pts)
View(vols_all_pts)
knitr::opts_chunk$set(echo = TRUE)
# necessary packages
library(robustbase)
library(knitr)
library(xtable)
library(Hmisc)
library(TOSTER)
library(stargazer)
# load data
allpts <- read.table("Carmela_Project.csv", header = T, sep=",")
colnames(allpts)[1] <- "ID"
# load volumetric data
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";") # patients automatically delineated
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";") # patients manually delineated
# remove # of voxels, keep only volumes (in mm3)
auto_pts <- auto_pts[,c(1,3,5,7,9,11,13)]
manual_pts <- manual_pts[,c(1,3,5,7,9,11,13)]
# convert volumes to mL (cm3)
auto_pts[,-1] <- auto_pts[,-1]*0.001
manual_pts[,-1] <- manual_pts[,-1]*0.001
# combine manual and automated volumes
vols_all_pts <- rbind(auto_pts, manual_pts)
# calculate HIR for days 1 and 2
vols_all_pts$HIR1 <- vols_all_pts$Day1_.8_volume/vols_all_pts$Day1_.2_volume
vols_all_pts$HIR2 <- vols_all_pts$Day2_.8_volume/vols_all_pts$Day2_.2_volume
# merge volumes and HIR with the rest of the data
allpts <- merge(allpts, vols_all_pts, by = "ID")
# create necessary variables (reperfusion / infarct growth binarized cut-offs)
allpts$reperf[allpts$relTmax_change<=-50] <- "Yes"
allpts$reperf[allpts$relTmax_change>-50] <- "No"
allpts$reperf <- factor(allpts$reperf)
allpts$infarct_growth[allpts$DWIgrowth>=7] <- "Yes"
allpts$infarct_growth[allpts$DWIgrowth<7] <- "No"
allpts$infarct_growth <- factor(allpts$infarct_growth)
# recode recanalization variable
allpts$Rekan[allpts$Rekan==0] <- "None" # no recanalization
allpts$Rekan[allpts$Rekan==1] <- "Full" # full recanalization
allpts$Rekan[allpts$Rekan==2] <- "Partial" # partial recanalization
allpts$Rekan <- factor(allpts$Rekan)
# recode other categorical variables
allpts$sex[allpts$sex==1] <- "Male"
allpts$sex[allpts$sex==2] <- "Female"
allpts$sex <- factor(allpts$sex)
allpts$iv_tPR[allpts$iv_tPR==0] <- "No"
allpts$iv_tPR[allpts$iv_tPR==1] <- "Yes"
allpts$iv_tPR <- factor(allpts$iv_tPR)
allpts$circulation[allpts$circulation==1] <- "Anterior"
allpts$circulation[allpts$circulation==2] <- "Posterior"
allpts$circulation <- factor(allpts$circulation)
# remove certain variables
allpts$no_recan_1 <- c()
allpts$VAR00002 <- c()
allpts$TSI_dich <- c()
View(allpts)
allpts <- read.table("Carmela_Project.csv", header = T, sep=",")
colnames(allpts)[1] <- "ID"
auto_pts <- read.table("ALLVOLS_automated_AK_20180605.csv", header=T, sep=";") # patients automatically delineated
manual_pts <- read.table("ALLVOLS_manual_AK_20180605.csv", header=T, sep=";") # patients manually delineated
auto_pts <- auto_pts[,c(1,3,5,7,9,11,13)]
manual_pts <- manual_pts[,c(1,3,5,7,9,11,13)]
auto_pts[,-1] <- auto_pts[,-1]*0.001
manual_pts[,-1] <- manual_pts[,-1]*0.001
vols_all_pts <- rbind(auto_pts, manual_pts)
View(vols_all_pts)
vols_all_pts$HIR1 <- vols_all_pts$Day1_.8_volume/vols_all_pts$Day1_.2_volume
vols_all_pts$HIR2 <- vols_all_pts$Day2_.8_volume/vols_all_pts$Day2_.2_volume
View(vols_all_pts)
allpts_test <- merge(allpts, vols_all_pts, by = "ID")
allpts$ID
plot(allpts$ID, vols_all_pts$ID)
vols_all_pts$ID
order(vols_all_pts$ID)
plot(allpts$ID, vols_all_pts$ID)
View(vols_all_pts)
allpts[~allpts['ID'].isin(vols_all_pts ['ID'])]
allpts[~allpts['ID'].isin(vols_all_pts['ID'])]
subset(allpts, !(vols_all_pts %in% a$x))
setdiff(allpts$ID, vols_all_pts$ID)
setdiff(vols_all_pts$ID, allpts$ID)
View(allpts)
vols_all_pts[vols_all_pts$ID=="86",]
vols_all_pts_new <- vols_all_pts[!vols_all_pts$ID=="86",]
